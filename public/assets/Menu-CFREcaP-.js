import{r as u,j as L,ak as W,bf as G}from"./index-BOycD4kd.js";import"./index-BwqtTtay.js";import{p as V,u as _,g as $,c as q,s as T,r as B,d as J,e as Q}from"./Typography-BDkkff4Z.js";import{P as X,a as Y}from"./Popover-COV8vM5j.js";import{g as Z}from"./Modal-CIgidMPB.js";import{o as ee}from"./ownerWindow-dn6wgS8C.js";import{L as te}from"./List-C3Ip_mV3.js";import{o as se}from"./useId-B1jnamIH.js";import{u as N}from"./useSlotProps-TYhxs4KB.js";function F(t,e,r){return t===e?t.firstChild:e&&e.nextElementSibling?e.nextElementSibling:r?null:t.firstChild}function H(t,e,r){return t===e?r?t.firstChild:t.lastChild:e&&e.previousElementSibling?e.previousElementSibling:r?null:t.lastChild}function O(t,e){if(e===void 0)return!0;let r=t.innerText;return r===void 0&&(r=t.textContent),r=r.trim().toLowerCase(),r.length===0?!1:e.repeating?r[0]===e.keys[0]:r.startsWith(e.keys.join(""))}function S(t,e,r,P,f,b){let m=!1,a=f(t,e,e?r:!1);for(;a;){if(a===t.firstChild){if(m)return!1;m=!0}const c=P?!1:a.disabled||a.getAttribute("aria-disabled")==="true";if(!a.hasAttribute("tabindex")||!O(a,b)||c)a=f(t,a,r);else return a.focus(),!0}return!1}const re=u.forwardRef(function(e,r){const{actions:P,autoFocus:f=!1,autoFocusItem:b=!1,children:m,className:a,disabledItemsFocusable:c=!1,disableListWrap:h=!1,onKeyDown:g,variant:v="selectedMenu",...K}=e,p=u.useRef(null),x=u.useRef({keys:[],repeating:!0,previousKeyMatched:!0,lastTime:null});V(()=>{f&&p.current.focus()},[f]),u.useImperativeHandle(P,()=>({adjustStyleForScrollbar:(s,{direction:o})=>{const i=!p.current.style.width;if(s.clientHeight<p.current.clientHeight&&i){const y=`${Z(ee(s))}px`;p.current.style[o==="rtl"?"paddingLeft":"paddingRight"]=y,p.current.style.width=`calc(100% + ${y})`}return p.current}}),[]);const C=s=>{const o=p.current,i=s.key;if(s.ctrlKey||s.metaKey||s.altKey){g&&g(s);return}const M=se(o).activeElement;if(i==="ArrowDown")s.preventDefault(),S(o,M,h,c,F);else if(i==="ArrowUp")s.preventDefault(),S(o,M,h,c,H);else if(i==="Home")s.preventDefault(),S(o,null,h,c,F);else if(i==="End")s.preventDefault(),S(o,null,h,c,H);else if(i.length===1){const n=x.current,I=i.toLowerCase(),D=performance.now();n.keys.length>0&&(D-n.lastTime>500?(n.keys=[],n.repeating=!0,n.previousKeyMatched=!0):n.repeating&&I!==n.keys[0]&&(n.repeating=!1)),n.lastTime=D,n.keys.push(I);const w=M&&!n.repeating&&O(M,n);n.previousKeyMatched&&(w||S(o,M,!1,c,F,n))?s.preventDefault():n.previousKeyMatched=!1}g&&g(s)},R=_(p,r);let l=-1;u.Children.forEach(m,(s,o)=>{if(!u.isValidElement(s)){l===o&&(l+=1,l>=m.length&&(l=-1));return}s.props.disabled||(v==="selectedMenu"&&s.props.selected||l===-1)&&(l=o),l===o&&(s.props.disabled||s.props.muiSkipListHighlight||s.type.muiSkipListHighlight)&&(l+=1,l>=m.length&&(l=-1))});const E=u.Children.map(m,(s,o)=>{if(o===l){const i={};return b&&(i.autoFocus=!0),s.props.tabIndex===void 0&&v==="selectedMenu"&&(i.tabIndex=0),u.cloneElement(s,i)}return s});return L.jsx(te,{role:"menu",ref:R,className:a,onKeyDown:C,tabIndex:f?0:-1,...K,children:E})});function oe(t){return q("MuiMenu",t)}$("MuiMenu",["root","paper","list"]);const ne={vertical:"top",horizontal:"right"},ie={vertical:"top",horizontal:"left"},le=t=>{const{classes:e}=t;return Q({root:["root"],paper:["paper"],list:["list"]},oe,e)},ae=T(X,{shouldForwardProp:t=>B(t)||t==="classes",name:"MuiMenu",slot:"Root",overridesResolver:(t,e)=>e.root})({}),ue=T(Y,{name:"MuiMenu",slot:"Paper",overridesResolver:(t,e)=>e.paper})({maxHeight:"calc(100% - 96px)",WebkitOverflowScrolling:"touch"}),ce=T(re,{name:"MuiMenu",slot:"List",overridesResolver:(t,e)=>e.list})({outline:0}),be=u.forwardRef(function(e,r){const P=W({props:e,name:"MuiMenu"}),{autoFocus:f=!0,children:b,className:m,disableAutoFocusItem:a=!1,MenuListProps:c={},onClose:h,open:g,PaperProps:v={},PopoverClasses:K,transitionDuration:p="auto",TransitionProps:{onEntering:x,...C}={},variant:R="selectedMenu",slots:l={},slotProps:E={},...s}=P,o=G(),i={...P,autoFocus:f,disableAutoFocusItem:a,MenuListProps:c,onEntering:x,PaperProps:v,transitionDuration:p,TransitionProps:C,variant:R},y=le(i),M=f&&!a&&g,n=u.useRef(null),I=(d,k)=>{n.current&&n.current.adjustStyleForScrollbar(d,{direction:o?"rtl":"ltr"}),x&&x(d,k)},D=d=>{d.key==="Tab"&&(d.preventDefault(),h&&h(d,"tabKeyDown"))};let w=-1;u.Children.map(b,(d,k)=>{u.isValidElement(d)&&(d.props.disabled||(R==="selectedMenu"&&d.props.selected||w===-1)&&(w=k))});const j=l.paper??ue,A=E.paper??v,z=N({elementType:l.root,externalSlotProps:E.root,ownerState:i,className:[y.root,m]}),U=N({elementType:j,externalSlotProps:A,ownerState:i,className:y.paper});return L.jsx(ae,{onClose:h,anchorOrigin:{vertical:"bottom",horizontal:o?"right":"left"},transformOrigin:o?ne:ie,slots:{paper:j,root:l.root},slotProps:{root:z,paper:U},open:g,ref:r,transitionDuration:p,TransitionProps:{onEntering:I,...C},ownerState:i,...s,classes:K,children:L.jsx(ce,{onKeyDown:D,actions:n,autoFocus:f&&(w===-1||a),autoFocusItem:M,variant:R,...c,className:J(y.list,c.className),children:b})})});export{be as M,re as a};
