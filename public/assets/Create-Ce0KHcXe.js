import{r as b,aK as M,j as e}from"./index-BOycD4kd.js";import{B as U}from"./Breadcrumb-BqJ4_UoQ.js";import{P as G}from"./PageContainer-97CIqrJb.js";import{I as R,a as H}from"./index-DwdLZAU5.js";import{C as p}from"./CustomFormLabel-CTInyefh.js";import{C as V}from"./CustomSelect-KGhokBm9.js";import{C as h}from"./CustomTextField-DGn70w9A.js";import{i as q,f as K}from"./index-tfJ8ZH83.js";import{B as d}from"./Box-BXQ1zNTo.js";import{S as g}from"./Stack-7R2xgwnv.js";import{T as s}from"./Typography-BDkkff4Z.js";import{B as C}from"./Button-DuWWTJ1w.js";import{D as S}from"./Divider-CZ0X2mWw.js";import{M as T}from"./MenuItem-BgV0zoqh.js";import{G as u}from"./Grid2-D56AonIH.js";import{I as L}from"./IconPlus-CMHBvUCl.js";import{P as _}from"./Paper-CrmG5ZWt.js";import{T as $}from"./TableContainer-CIvSrxgc.js";import{T as J,a as Q,b as A,c as l,d as X}from"./TableRow-CPP-a1tn.js";import{T as w}from"./Tooltip-DKFlwfZ_.js";import{I as D}from"./IconButton-C9FWHOCN.js";import{I as Y}from"./IconSquareRoundedPlus-ChpHvtPc.js";import{I as Z}from"./IconTrash-Cds8XG15.js";import{A as ee}from"./Alert-CkB7u9JX.js";import{B as te}from"./BlankCard-QeKMVCiw.js";import{C as re}from"./CardContent--aLPNTp8.js";import"./index-BwqtTtay.js";import"./useSlotProps-TYhxs4KB.js";import"./IconCircle-CwxeJJOj.js";import"./createReactComponent-DJ-alZeM.js";import"./Link-DehrJQLa.js";import"./Select-Dz4F7h-J.js";import"./Menu-CFREcaP-.js";import"./Popover-COV8vM5j.js";import"./isHostComponent-DVu5iVWx.js";import"./useSlot-C8hSq5RO.js";import"./Modal-CIgidMPB.js";import"./ownerWindow-dn6wgS8C.js";import"./useId-B1jnamIH.js";import"./createChainedFunction-BO_9K8Jh.js";import"./utils-C9LLcjVj.js";import"./getReactElementRef-DEfyDt09.js";import"./Portal-Dipjj-39.js";import"./debounce-Be36O1Ab.js";import"./Grow-DaxZ4x-g.js";import"./List-C3Ip_mV3.js";import"./utils-DoM3o7-Q.js";import"./useControlled-CGXnS8Tc.js";import"./formControlState-Dq1zat_P.js";import"./useFormControl-Ds-I_R6P.js";import"./TextField-B9e79Kv3.js";import"./FormControl-CFGl-PZS.js";import"./index-BRTItZEI.js";import"./createStack-C9SkPHjo.js";import"./dividerClasses-BAp1ZLUP.js";import"./listItemTextClasses-DqG0UCcK.js";import"./Popper-CDUIbv4Q.js";import"./Close-D9PXX_a0.js";import"./Card-Bhf9_j_x.js";const ie=()=>{const{addInvoice:B,invoices:j}=b.useContext(R),[W,y]=b.useState(!1),I=M(),[o,c]=b.useState({id:0,billFrom:"",billTo:"",totalCost:0,status:"Pending",billFromAddress:"",billToAddress:"",orders:[{itemName:"",unitPrice:"",units:"",unitTotalPrice:0}],vat:0,grandTotal:0,subtotal:0,date:new Date().toISOString().split("T")[0]});b.useEffect(()=>{if(j.length>0){const r=j[j.length-1].id;c(t=>({...t,id:r+1}))}else c(r=>({...r,id:1}))},[j]);const f=r=>{let t=0;r.forEach(n=>{const m=parseFloat(n.unitPrice)||0,k=parseInt(n.units)||0,F=m*k;t+=F,n.unitTotalPrice=F});const i=t*.1,a=t+i;return{subtotal:t,vat:i,grandTotal:a}},x=r=>{const{name:t,value:i}=r.target;c(a=>{const n={...a,[t]:i},m=f(n.orders);return{...n,...m}})},v=(r,t,i)=>{c(a=>{const n=[...a.orders];n[r]={...n[r],[t]:i};const m=f(n);return{...a,orders:n,...m}})},P=()=>{c(r=>{const t=[...r.orders,{itemName:"",unitPrice:"",units:"",unitTotalPrice:0}],i=f(t);return{...r,orders:t,...i}})},z=r=>{c(t=>{const i=t.orders.filter((n,m)=>m!==r),a=f(i);return{...t,orders:i,...a}})},E=async r=>{r.preventDefault();try{await B(o),c({id:0,billFrom:"",billTo:"",totalCost:0,status:"Pending",billFromAddress:"",billToAddress:"",orders:[{itemName:"",unitPrice:"",units:"",unitTotalPrice:0}],vat:0,grandTotal:0,subtotal:0,date:new Date().toISOString().split("T")[0]}),y(!0),setTimeout(()=>{y(!1)},5e3),I("/apps/invoice/list")}catch(t){console.error("Error adding invoice:",t)}},O=q(new Date(o.date))?new Date(o.date):new Date,N=K(O,"EEEE, MMMM dd, yyyy");return e.jsx(e.Fragment,{children:e.jsx("form",{onSubmit:E,children:e.jsxs(d,{children:[e.jsxs(g,{direction:"row",spacing:{xs:1,sm:2,md:4},justifyContent:"space-between",mb:3,children:[e.jsxs(s,{variant:"h5",children:["# ",o.id]}),e.jsxs(d,{display:"flex",gap:1,children:[e.jsx(C,{variant:"outlined",color:"error",onClick:()=>{I("/apps/invoice/list")},children:"Cancel"}),e.jsx(C,{type:"submit",variant:"contained",color:"primary",children:"Create Invoice"})]})]}),e.jsx(S,{}),e.jsxs(g,{direction:"row",spacing:{xs:1,sm:2,md:4},justifyContent:"space-between",alignItems:"center",mb:3,children:[e.jsxs(d,{children:[e.jsx(p,{htmlFor:"demo-simple-select",children:"Order Status"}),e.jsxs(V,{labelId:"demo-simple-select-label",id:"demo-simple-select",value:o.status,onChange:x,disabled:!0,children:[e.jsx(T,{value:"Pending",children:"Pending"}),e.jsx(T,{value:"Shipped",children:"Shipped"}),e.jsx(T,{value:"Delivered",children:"Delivered"})]})]}),e.jsxs(d,{textAlign:"right",children:[e.jsx(p,{htmlFor:"demo-simple-select",children:"Order Date"}),e.jsxs(s,{variant:"body1",children:[" ",N]})]})]}),e.jsx(S,{}),e.jsxs(u,{container:!0,spacing:3,mb:4,children:[e.jsxs(u,{size:{xs:12,sm:6},children:[e.jsx(p,{htmlFor:"bill-from",children:"Bill From"}),e.jsx(h,{id:"bill-from",name:"billFrom",value:o.billFrom,onChange:x,fullWidth:!0})]}),e.jsxs(u,{size:{xs:12,sm:6},children:[e.jsx(p,{htmlFor:"bill-to",sx:{mt:{xs:0,sm:3}},children:"Bill To"}),e.jsx(h,{name:"billTo",value:o.billTo,onChange:x,fullWidth:!0})]}),e.jsxs(u,{size:{xs:12,sm:6},children:[e.jsx(p,{htmlFor:"From Address",sx:{mt:0},children:"From Address"}),e.jsx(h,{name:"billFromAddress",value:o.billFromAddress,onChange:x,fullWidth:!0})]}),e.jsxs(u,{size:{xs:12,sm:6},children:[e.jsx(p,{htmlFor:"Bill To Address",sx:{mt:0},children:"Bill To Address"}),e.jsx(h,{name:"billToAddress",value:o.billToAddress,onChange:x,fullWidth:!0})]})]}),e.jsxs(g,{direction:"row",justifyContent:"space-between",alignItems:"center",mb:2,children:[e.jsx(s,{variant:"h6",children:"Items Details :"}),e.jsx(C,{onClick:P,variant:"contained",color:"primary",startIcon:e.jsx(L,{width:18}),children:"Add Item"})]}),e.jsx(_,{variant:"outlined",children:e.jsx($,{sx:{whiteSpace:{xs:"nowrap",md:"unset"}},children:e.jsxs(J,{children:[e.jsx(Q,{children:e.jsxs(A,{children:[e.jsx(l,{children:e.jsx(s,{variant:"h6",fontSize:"14px",children:"Item Name"})}),e.jsx(l,{children:e.jsx(s,{variant:"h6",fontSize:"14px",children:"Unit Price"})}),e.jsx(l,{children:e.jsx(s,{variant:"h6",fontSize:"14px",children:"Units"})}),e.jsx(l,{children:e.jsx(s,{variant:"h6",fontSize:"14px",children:"Total Cost"})}),e.jsx(l,{}),e.jsx(l,{children:e.jsx(s,{variant:"h6",fontSize:"14px",children:"Actions"})})]})}),e.jsx(X,{children:o.orders.map((r,t)=>e.jsxs(A,{children:[e.jsx(l,{children:e.jsx(h,{type:"text",value:r.itemName,placeholder:"Item Name",onChange:i=>v(t,"itemName",i.target.value),fullWidth:!0})}),e.jsx(l,{children:e.jsx(h,{type:"number",value:r.unitPrice,placeholder:"Unit Price",onChange:i=>v(t,"unitPrice",i.target.value),fullWidth:!0})}),e.jsx(l,{children:e.jsx(h,{type:"number",value:r.units,placeholder:"Units",onChange:i=>v(t,"units",i.target.value),fullWidth:!0})}),e.jsx(l,{children:e.jsx(s,{variant:"body1",children:r.unitTotalPrice})}),e.jsx(l,{}),e.jsxs(l,{children:[e.jsx(w,{title:"Add Item",children:e.jsx(D,{onClick:P,color:"primary",children:e.jsx(Y,{width:22})})}),e.jsx(w,{title:"Delete Item",children:e.jsx(D,{onClick:()=>z(t),color:"error",children:e.jsx(Z,{width:22})})})]})]},t))})]})})}),e.jsxs(d,{p:3,bgcolor:"primary.light",mt:3,children:[e.jsxs(d,{display:"flex",justifyContent:"end",gap:3,mb:3,children:[e.jsx(s,{variant:"body1",fontWeight:600,children:"Sub Total:"}),e.jsx(s,{variant:"body1",fontWeight:600,children:o.subtotal})]}),e.jsxs(d,{display:"flex",justifyContent:"end",gap:3,mb:3,children:[e.jsx(s,{variant:"body1",fontWeight:600,children:"VAT:"}),e.jsx(s,{variant:"body1",fontWeight:600,children:o.vat})]}),e.jsxs(d,{display:"flex",justifyContent:"end",gap:3,children:[e.jsx(s,{variant:"body1",fontWeight:600,children:"Grand Total:"}),e.jsx(s,{variant:"body1",fontWeight:600,children:o.grandTotal})]})]}),W&&e.jsx(ee,{severity:"success",sx:{position:"fixed",top:16,right:16},children:"Invoice added successfully."})]})})})},se=[{to:"/",title:"Home"},{title:"Invoice Create"}],ct=()=>e.jsx(H,{children:e.jsxs(G,{title:"Create Invoice",description:"this is Create Invoice",children:[e.jsx(U,{title:"Create Invoice",items:se}),e.jsx(te,{children:e.jsx(re,{children:e.jsx(ie,{})})})]})});export{ct as default};
