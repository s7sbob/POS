import{b as L,c as y,r as B,Q as F,R as M,j as e,u as N,T as G,V as U,l as b,W as D}from"./index-BOycD4kd.js";import{B as V}from"./Breadcrumb-BqJ4_UoQ.js";import{P as $}from"./PageContainer-97CIqrJb.js";import{S as R}from"./Scrollbar-BkJlPIYB.js";import{B as t}from"./Box-BXQ1zNTo.js";import{B as I}from"./Badge-DqXeSk3v.js";import{A as x}from"./Avatar-C06U4if4.js";import{T as c,s as q}from"./Typography-BDkkff4Z.js";import{T as Q}from"./TextField-B9e79Kv3.js";import{I as J}from"./InputAdornment-BxJq-rlG.js";import{I as Y}from"./IconSearch-Ci1W0iUc.js";import{L as K}from"./List-C3Ip_mV3.js";import{B as X}from"./Button-DuWWTJ1w.js";import{I as Z}from"./IconChevronDown-D0HMaIl7.js";import{M as _}from"./Menu-CFREcaP-.js";import{M as v}from"./MenuItem-BgV0zoqh.js";import{L as ee}from"./ListItemButton-CZO8tGjr.js";import{L as w}from"./ListItemAvatar-B3eIZqOr.js";import{L as T}from"./ListItemText-B-rb3kPs.js";import{f as P}from"./index-SiztLm36.js";import{A as S}from"./Alert-CkB7u9JX.js";import{u as A}from"./index-C-nkt2MJ.js";import{D as re,I as z}from"./IconMenu2-C4Tm1sr5.js";import{S as k}from"./Stack-7R2xgwnv.js";import{G as C}from"./Grid2-D56AonIH.js";import{I as h}from"./IconButton-C9FWHOCN.js";import{I as se}from"./IconDownload-CWPta3Nx.js";import{L as te}from"./ListItem-Hz3oRS8u.js";import{I as ie}from"./IconPhone-D6UwWs6u.js";import{c as W}from"./createReactComponent-DJ-alZeM.js";import{I as oe}from"./IconDotsVertical-BZJRIQ3l.js";import{D as O}from"./Divider-CZ0X2mWw.js";import{I as ae}from"./Select-Dz4F7h-J.js";import{I as ne}from"./IconSend-DeV5r_4E.js";import{I as le}from"./IconPhoto-CUN8NLc_.js";import{A as de}from"./AppCard-BjUryz5P.js";import"./index-BwqtTtay.js";import"./Paper-CrmG5ZWt.js";import"./useSlotProps-TYhxs4KB.js";import"./IconCircle-CwxeJJOj.js";import"./Link-DehrJQLa.js";import"./index-3H-Sgo4j.js";import"./isObject-D7bzW4Uf.js";import"./usePreviousProps-BVDGwFiJ.js";import"./useSlot-C8hSq5RO.js";import"./FormControl-CFGl-PZS.js";import"./utils-DoM3o7-Q.js";import"./useFormControl-Ds-I_R6P.js";import"./useId-B1jnamIH.js";import"./formControlState-Dq1zat_P.js";import"./Popover-COV8vM5j.js";import"./isHostComponent-DVu5iVWx.js";import"./Modal-CIgidMPB.js";import"./ownerWindow-dn6wgS8C.js";import"./createChainedFunction-BO_9K8Jh.js";import"./utils-C9LLcjVj.js";import"./getReactElementRef-DEfyDt09.js";import"./Portal-Dipjj-39.js";import"./debounce-Be36O1Ab.js";import"./Grow-DaxZ4x-g.js";import"./dividerClasses-BAp1ZLUP.js";import"./listItemTextClasses-DqG0UCcK.js";import"./listItemButtonClasses-Bk0utCM3.js";import"./index-BRTItZEI.js";import"./Close-D9PXX_a0.js";import"./Slide-Crj3Nrd3.js";import"./createStack-C9SkPHjo.js";import"./useControlled-CGXnS8Tc.js";import"./Card-Bhf9_j_x.js";var ce=W("paperclip","IconPaperclip",[["path",{d:"M15 7l-6.5 6.5a1.5 1.5 0 0 0 3 3l6.5 -6.5a3 3 0 0 0 -6 -6l-6.5 6.5a4.5 4.5 0 0 0 9 9l6.5 -6.5",key:"svg-0"}]]),pe=W("video","IconVideo",[["path",{d:"M15 10l4.553 -2.276a1 1 0 0 1 1.447 .894v6.764a1 1 0 0 1 -1.447 .894l-4.553 -2.276v-4z",key:"svg-0"}],["path",{d:"M3 6m0 2a2 2 0 0 1 2 -2h8a2 2 0 0 1 2 2v8a2 2 0 0 1 -2 2h-8a2 2 0 0 1 -2 -2z",key:"svg-1"}]]);const me=()=>{const n=L(),o=y(s=>s.chatReducer.chatContent);B.useEffect(()=>{n(F())},[n]);const l=(s,m)=>s&&s.filter(j=>j.name.toLocaleLowerCase().includes(m.toLocaleLowerCase())),d=y(s=>l(s.chatReducer.chats,s.chatReducer.chatSearch)),a=s=>{let m="";const j=s.messages[s.messages.length-1];if(j){const H=j.senderId===s.id?"You: ":"",E=j.type==="image"?"Sent a photo":j.msg;m=`${H}${E}`}return m},i=s=>{var m;return(m=b.last(s.messages))==null?void 0:m.createdAt},[r,p]=M.useState(null),u=!!r,f=s=>{p(s.currentTarget)},g=()=>{p(null)};return e.jsxs("div",{children:[e.jsxs(t,{display:"flex",alignItems:"center",gap:"10px",p:3,children:[e.jsx(I,{variant:"dot",anchorOrigin:{vertical:"bottom",horizontal:"right"},overlap:"circular",color:"success",children:e.jsx(x,{alt:"Remy Sharp",src:N,sx:{width:54,height:54}})}),e.jsxs(t,{children:[e.jsx(c,{variant:"body1",fontWeight:600,children:"John Deo"}),e.jsx(c,{variant:"body2",children:"Marketing Manager"})]})]}),e.jsx(t,{px:3,py:1,children:e.jsx(Q,{id:"outlined-search",placeholder:"Search contacts",size:"small",type:"search",variant:"outlined",InputProps:{endAdornment:e.jsx(J,{position:"end",children:e.jsx(Y,{size:"16"})})},fullWidth:!0,onChange:s=>n(G(s.target.value))})}),e.jsxs(K,{sx:{px:0},children:[e.jsxs(t,{px:2.5,pb:1,children:[e.jsxs(X,{id:"basic-button","aria-controls":u?"basic-menu":void 0,"aria-haspopup":"true","aria-expanded":u?"true":void 0,onClick:f,color:"inherit",children:["Recent Chats ",e.jsx(Z,{size:"16"})]}),e.jsxs(_,{id:"basic-menu",anchorEl:r,open:u,onClose:g,MenuListProps:{"aria-labelledby":"basic-button"},children:[e.jsx(v,{onClick:g,children:"Sort By Time"}),e.jsx(v,{onClick:g,children:"Sort By Unread"}),e.jsx(v,{onClick:g,children:"Mark as all Read"})]})]}),e.jsx(R,{sx:{height:{lg:"calc(100vh - 100px)",md:"100vh"},maxHeight:"600px"},children:d&&d.length?d.map(s=>e.jsxs(ee,{onClick:()=>n(U(s.id)),sx:{mb:.5,py:2,px:3,alignItems:"start"},selected:o===s.id,children:[e.jsx(w,{children:e.jsx(I,{color:s.status==="online"?"success":s.status==="busy"?"error":s.status==="away"?"warning":"secondary",variant:"dot",anchorOrigin:{vertical:"bottom",horizontal:"right"},overlap:"circular",children:e.jsx(x,{alt:"Remy Sharp",src:s.thumb,sx:{width:42,height:42}})})}),e.jsx(T,{primary:e.jsx(c,{variant:"subtitle2",fontWeight:600,mb:.5,children:s.name}),secondary:a(s),secondaryTypographyProps:{noWrap:!0},sx:{my:0}}),e.jsx(t,{sx:{flexShrink:"0"},mt:.5,children:e.jsx(c,{variant:"body2",children:P(new Date(i(s)),{addSuffix:!1})})})]},s.id)):e.jsx(t,{m:2,children:e.jsx(S,{severity:"error",variant:"filled",sx:{color:"white"},children:"No Contacts Found!"})})})]})]})},xe=320,he=({isMobileSidebarOpen:n,onSidebarClose:o})=>{const l=A(d=>d.breakpoints.up("lg"));return e.jsx(re,{open:n,onClose:o,variant:l?"permanent":"temporary",sx:{width:xe,flexShrink:0,zIndex:l?0:1,"& .MuiDrawer-paper":{position:"relative"}},children:e.jsx(me,{})})},ue=320,ge=({isInSidebar:n,chat:o})=>{const l=A(r=>r.breakpoints.up("lg")),d=b.uniq(b.flatten(o==null?void 0:o.messages.map(r=>r.attachment))).length,a=b.uniq(b.flatten(o==null?void 0:o.messages.map(r=>(r==null?void 0:r.type)==="image"?r.msg:null))).length-1,i=q(k)(()=>({".showOnHover":{display:"none"},"&:hover .showOnHover":{display:"block"}}));return e.jsx(e.Fragment,{children:n?e.jsxs(t,{sx:{width:n===!0?ue:0,flexShrink:0,border:"0",borderLeft:"1px",borderStyle:"solid",right:"0",background:r=>r.palette.background.paper,boxShadow:l?null:r=>r.shadows[8],position:l?"relative":"absolute",borderColor:r=>r.palette.divider},p:3,children:[e.jsxs(c,{variant:"h6",mb:2,children:["Media (",a,")"]}),e.jsxs(C,{container:!0,spacing:2,children:[o==null?void 0:o.messages.map(r=>e.jsx(C,{size:{xs:12,lg:4},children:(r==null?void 0:r.type)==="image"?e.jsx(x,{src:r==null?void 0:r.msg,alt:"media",variant:"rounded",sx:{width:"72px",height:"72px"}}):""},r.id)),e.jsx(C,{size:{xs:12,lg:12},children:a===0?e.jsx(S,{severity:"error",children:"No Media Found!"}):null})]}),e.jsxs(c,{variant:"h6",mt:5,mb:2,children:["Attachments (",d,")"]}),e.jsxs(t,{children:[o==null?void 0:o.messages.map((r,p)=>{var u;return e.jsx(k,{spacing:2.5,direction:"column",children:(u=r==null?void 0:r.attachment)==null?void 0:u.map((f,g)=>e.jsxs(i,{direction:"row",gap:2,children:[e.jsx(x,{variant:"rounded",sx:{width:"48px",height:"48px",bgcolor:s=>s.palette.grey[100]},children:e.jsx(x,{src:f.icon,alt:"av",variant:"rounded",sx:{width:"24px",height:"24px"}})}),e.jsxs(t,{mr:"auto",children:[e.jsx(c,{variant:"subtitle2",fontWeight:600,mb:1,children:f.file}),e.jsx(c,{variant:"body2",children:f.fileSize})]}),e.jsx(t,{className:"showOnHover",children:e.jsx(h,{"aria-label":"delete",children:e.jsx(se,{stroke:1.5,size:"20"})})})]},g))},p)}),d===0?e.jsx(S,{severity:"error",children:"No Attachment Found!"}):null]})]}):null})},je=({toggleChatSidebar:n})=>{const[o,l]=M.useState(!0),d=A(i=>i.breakpoints.up("lg")),a=y(i=>i.chatReducer.chats[i.chatReducer.chatContent-1]);return e.jsx(t,{children:a?e.jsxs(t,{children:[e.jsxs(t,{children:[e.jsxs(t,{display:"flex",alignItems:"center",p:2,children:[e.jsx(t,{sx:{display:{xs:"block",md:"block",lg:"none"},mr:"10px"},children:e.jsx(z,{stroke:1.5,onClick:n})}),e.jsxs(te,{dense:!0,disableGutters:!0,children:[e.jsx(w,{children:e.jsx(I,{color:a.status==="online"?"success":a.status==="busy"?"error":a.status==="away"?"warning":"secondary",variant:"dot",anchorOrigin:{vertical:"bottom",horizontal:"right"},overlap:"circular",children:e.jsx(x,{alt:a.name,src:a.thumb})})}),e.jsx(T,{primary:e.jsx(c,{variant:"h5",children:a.name}),secondary:a.status})]},a.id),e.jsxs(k,{direction:"row",children:[e.jsx(h,{"aria-label":"delete",children:e.jsx(ie,{stroke:1.5})}),e.jsx(h,{"aria-label":"delete",children:e.jsx(pe,{stroke:1.5})}),e.jsx(h,{"aria-label":"delete",onClick:()=>l(!o),children:e.jsx(oe,{stroke:1.5})})]})]}),e.jsx(O,{})]}),e.jsxs(t,{display:"flex",children:[e.jsx(t,{width:"100%",children:e.jsx(R,{sx:{height:"650px",overflow:"auto",maxHeight:"800px"},children:e.jsx(t,{p:3,children:a.messages.map(i=>e.jsx(t,{children:a.id===i.senderId?e.jsx(e.Fragment,{children:e.jsxs(t,{display:"flex",children:[e.jsx(w,{children:e.jsx(x,{alt:a.name,src:a.thumb,sx:{width:40,height:40}})}),e.jsxs(t,{children:[i.createdAt?e.jsxs(c,{variant:"body2",color:"grey.400",mb:1,children:[a.name,","," ",P(new Date(i.createdAt),{addSuffix:!1})," ","ago"]}):null,i.type==="text"?e.jsx(t,{mb:2,sx:{p:1,backgroundColor:"grey.100",mr:"auto",maxWidth:"320px"},children:i.msg}):null,i.type==="image"?e.jsx(t,{mb:1,sx:{overflow:"hidden",lineHeight:"0px"},children:e.jsx("img",{src:i.msg,alt:"attach",width:"150"})}):null]})]})}):e.jsx(t,{mb:1,display:"flex",alignItems:"flex-end",flexDirection:"row-reverse",children:e.jsxs(t,{alignItems:"flex-end",display:"flex",flexDirection:"column",children:[i.createdAt?e.jsx(c,{variant:"body2",color:"grey.400",mb:1,children:"ago"}):null,i.type==="text"?e.jsx(t,{mb:1,sx:{p:1,backgroundColor:"primary.light",ml:"auto",maxWidth:"320px"},children:i.msg},i.id):null,i.type==="image"?e.jsx(t,{mb:1,sx:{overflow:"hidden",lineHeight:"0px"},children:e.jsx("img",{src:i.msg,alt:"attach",width:"250"})}):null]})})},i.id+i.msg+i.createdAt))})})}),e.jsx(ge,{isInSidebar:d?o:!o,chat:a})]})]}):e.jsxs(t,{display:"flex",alignItems:"center",p:2,pb:1,pt:1,children:[e.jsx(t,{sx:{display:{xs:"flex",md:"flex",lg:"none"},mr:"10px"},children:e.jsx(z,{stroke:1.5,onClick:n})}),e.jsx(c,{variant:"h4",children:"Select Chat"})]})})},fe=()=>{const[n,o]=M.useState(""),l=L(),d=y(p=>p.chatReducer.chatContent),a=p=>{o(p.target.value)},i={id:d,msg:n},r=p=>{p.preventDefault(),p.stopPropagation(),l(D(i)),o("")};return e.jsx(t,{p:2,children:e.jsxs("form",{onSubmit:r,style:{display:"flex",gap:"10px",alignItems:"center"},children:[e.jsx(ae,{id:"msg-sent",fullWidth:!0,value:n,placeholder:"Type a Message",size:"small",type:"text",inputProps:{"aria-label":"Type a Message"},onChange:a.bind(null)}),e.jsx(h,{"aria-label":"delete",onClick:()=>{l(D(i)),o("")},disabled:!n,color:"primary",children:e.jsx(ne,{stroke:1.5,size:"20"})}),e.jsx(h,{"aria-label":"delete",children:e.jsx(le,{stroke:1.5,size:"20"})}),e.jsx(h,{"aria-label":"delete",children:e.jsx(ce,{stroke:1.5,size:"20"})})]})})},Tr=()=>{const[n,o]=B.useState(!1);return e.jsxs($,{title:"Chat ui",description:"this is Chat page",children:[e.jsx(V,{title:"Chat app",subtitle:"Messenger"}),e.jsxs(de,{children:[e.jsx(he,{isMobileSidebarOpen:n,onSidebarClose:()=>o(!1)}),e.jsxs(t,{flexGrow:1,children:[e.jsx(je,{toggleChatSidebar:()=>o(!0)}),e.jsx(O,{}),e.jsx(fe,{})]})]})]})};export{Tr as default};
